# üìù ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î - YouTube Thumbnail Generator

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:** 2025-11-15
**Commit ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:** `f912707` - "üì® ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á error message ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö n8n"
**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤)

---

## üéØ Preset Configuration

### Preset 1: ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß (‡∏´‡∏±‡∏ß-‡πÄ‡∏≠‡∏ß) - YouTube
```json
{
  "id": "1",
  "name": "‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß (‡∏´‡∏±‡∏ß-‡πÄ‡∏≠‡∏ß)",
  "description": "‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏´‡∏±‡∏ß‡∏ñ‡∏∂‡∏á‡πÄ‡∏≠‡∏ß - ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö YouTube",
  "num_characters": 3,
  "crop_point": "waist",
  "layout_type": "tri_hero",
  "vertical_align": "top"
}
```

**‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:**
- `CHARACTER_CROP_HEIGHT_MULTIPLIER`: 3.5
- `crop_width`: face_h * 2.0
- `crop_offset`: 0.25 (face ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà 25% ‡∏à‡∏≤‡∏Å‡∏ö‡∏ô)
- `scale`: 1.15 (115% ‡∏Ç‡∏≠‡∏á canvas height)
- `vertical_align`: "top"
- `top_margin`: 85px

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
- ‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏±‡∏ß‚Üí‡πÄ‡∏≠‡∏ß
- ‡∏´‡∏±‡∏ß‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡∏ö‡∏ô 85px
- ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏™‡∏π‡∏á ~1242px (1080 * 1.15)

---

### Preset 2: ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡∏ï‡∏±‡∏ß (‡∏´‡∏±‡∏ß-‡πÄ‡∏ó‡πâ‡∏≤) - YouTube Shorts
```json
{
  "id": "2",
  "name": "‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡∏ï‡∏±‡∏ß (‡∏´‡∏±‡∏ß-‡πÄ‡∏ó‡πâ‡∏≤)",
  "description": "‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÄ‡∏ï‡πá‡∏°‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏´‡∏±‡∏ß‡∏ñ‡∏∂‡∏á‡πÄ‡∏ó‡πâ‡∏≤ ‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á - ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö YouTube Shorts",
  "num_characters": 3,
  "crop_point": "full_body",
  "layout_type": "tri_hero",
  "vertical_align": "bottom"
}
```

**‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ (‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô):**
- `CHARACTER_CROP_HEIGHT_MULTIPLIER`: 6.5 (‡πÉ‡∏ô CROP_MULTIPLIERS)
- `crop_width`: face_h * 2.0
- `crop_offset`: 0.25
- `scale`: 1.15
- `vertical_align`: "bottom"

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
- ‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏±‡∏ß‚Üí‡πÄ‡∏ó‡πâ‡∏≤
- ‡πÄ‡∏ó‡πâ‡∏≤‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á
- ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏™‡∏π‡∏á ~1242px

**‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö:** multiplier 6.5 ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å

---

## üìê Layout Configuration (tri_hero)

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£ 3 ‡∏Ñ‡∏ô:**

```python
# ‡∏ï‡∏±‡∏ß‡∏ã‡πâ‡∏≤‡∏¢
position: x = 20% (384px), y = 0
scale: 1.15
z_index: 9

# ‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á
position: x = 50% (960px), y = 0
scale: 1.15
z_index: 10 (‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏∏‡∏î)

# ‡∏ï‡∏±‡∏ß‡∏Ç‡∏ß‡∏≤
position: x = 80% (1536px), y = 0
scale: 1.15
z_index: 9
```

---

## üé® Character Rendering Settings

### Crop Settings (‡∏ï‡∏≠‡∏ô crop ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£):
```python
# ‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
CHARACTER_CROP_HEIGHT_MULTIPLIER = 3.5  # ‡∏´‡∏±‡∏ß‚Üí‡πÄ‡∏≠‡∏ß

# ‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á vs ‡∏ï‡∏±‡∏ß‡∏Ç‡πâ‡∏≤‡∏á (‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°):
if is_center:
    crop_width = face_h * 1.8  # ‡πÅ‡∏Ñ‡∏ö
else:
    crop_width = face_h * 2.4  # ‡∏Å‡∏ß‡πâ‡∏≤‡∏á

# Crop offset
crop_y1 = face_center_y - int(crop_height * 0.38)  # ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà 38% ‡∏à‡∏≤‡∏Å‡∏ö‡∏ô
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì (face_h = 150px):**
```
crop_height = 150 * 3.5 = 525px
crop_width (center) = 150 * 1.8 = 270px
crop_width (side) = 150 * 2.4 = 360px
crop_y1 = face_center_y - (525 * 0.38) = face_center_y - 199.5px
```

### Resize Settings:
```python
# ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì target size
target_h = canvas_height * placement.scale  # 1080 * 1.15 = 1242px
aspect_ratio = character_img.width / character_img.height
target_w = target_h * aspect_ratio

# ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (crop 270x525):
aspect_ratio = 270/525 = 0.514
target_w = 1242 * 0.514 = 638px
```

### Position Settings:
```python
# ‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (X): ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á
paste_x = placement.position.x - new_w // 2

# ‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á (Y):
if vertical_align == "bottom":
    paste_y = canvas.height - new_h  # ‡∏ä‡∏¥‡∏î‡∏•‡πà‡∏≤‡∏á
else:  # "top"
    top_margin = 85
    paste_y = placement.position.y - head_top_scaled + top_margin
```

---

## üî¢ Face Detection Settings

```python
# Model
FACE_DETECTION_MODEL = "buffalo_s"  # ‡πÄ‡∏£‡πá‡∏ß, ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ 95%

# Thresholds (‡∏ú‡πà‡∏≠‡∏ô‡∏õ‡∏£‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏Ñ‡∏ô‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô)
FACE_CONFIDENCE_THRESHOLD = 0.35  # ‡∏•‡∏î‡∏à‡∏≤‡∏Å 0.45
MIN_FACE_SIZE = 40  # ‡∏•‡∏î‡∏à‡∏≤‡∏Å 50

# ONNX Optimization
ONNX_ENABLE_OPTIMIZATION = True
ONNX_NUM_THREADS = 4
ONNX_EXECUTION_MODE = "sequential"
```

---

## üéØ Character Selection Settings

```python
# Force 3 Characters
desired_counts = [3]  # ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö 3 ‡∏Ñ‡∏ô‡πÄ‡∏™‡∏°‡∏≠
allow_duplicates = True  # ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ

# Rejection Rule
if num_found < 2:
    return None  # ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò! ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏Ñ‡∏ô

# Duplication
if num_found == 2:
    # Duplicate ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà 3
    duplicate_key = f"{best_char_key}_dup"
    chars[duplicate_key] = chars[best_char_key].copy()
```

---

## üìä Output Settings

```python
OUTPUT_WIDTH = 1920
OUTPUT_HEIGHT = 1080
OUTPUT_FORMAT = "jpg"
OUTPUT_QUALITY = 95
```

---

## üé¨ Video Processing Settings

```python
# Frame Extraction (SPEED MODE)
VIDEO_FRAMES_PER_MINUTE = 15  # ‡∏ó‡∏∏‡∏Å 4 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
VIDEO_MAX_FRAMES = 150  # ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 150 frames
VIDEO_BATCH_SIZE = 50  # Process ‡πÄ‡∏õ‡πá‡∏ô batch

# Smart Frame Selection
ENABLE_SMART_FRAME_SELECTION = True
FRAMES_PER_SCENE = 10
CANDIDATE_FRAME_INTERVAL = 0.4  # ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

# Quality Weights
SMART_WEIGHT_EYES_OPEN = 0.60  # 60%
SMART_WEIGHT_SHARPNESS = 0.20  # 20%
SMART_WEIGHT_FRONTALITY = 0.15  # 15%
SMART_WEIGHT_FACE_SIZE = 0.05  # 5%

# Thresholds
SMART_MIN_EYES_OPEN_SCORE = 0.50
SMART_MIN_FRONTALITY_SCORE = 0.55
```

---

## üîÑ Clustering Settings

```python
CLUSTERING_ALGORITHM = "DBSCAN"
DBSCAN_EPS = 0.48  # ‡∏£‡∏ß‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô
DBSCAN_MIN_SAMPLES = 1  # ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß
VIDEO_SIMILARITY_THRESHOLD = 0.70  # ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
```

---

## üìù ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### ‚úÖ Commits ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ (‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô):
- `f912707` - error message n8n
- `a150aa0` - FORCE 3 CHARACTERS
- `9f0d349` - parameter fixes
- `095ee2c` - COMPLETE REFACTOR

### ‚ùå Commits ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å (‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤):
- `334651b` - Preset 2 ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Preset 1 (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏¥‡∏î)
- `7c87aaf` - FIX COMPLETE (‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏¥‡∏î)
- `f25235e` - Face-Size Based Scaling (‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ)
- `f1140bb` - ‡πÅ‡∏Å‡πâ‡∏´‡∏±‡∏ß‡∏Ç‡∏≤‡∏î (crop_offset 0.38‚Üí0.25)
- `837cf7c` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£ (scale 1.15‚Üí1.50)
- `817919e` - Normalize character crop
- `b4fb87a` - FIX Preset 2

---

## üö® ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 1: ‡∏´‡∏±‡∏ß‡∏Ç‡∏≤‡∏î
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** crop_offset = 0.38 ‚Üí ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡πà‡∏•‡∏≠‡∏á:** ‡∏•‡∏î‡πÄ‡∏õ‡πá‡∏ô 0.25 (‡πÉ‡∏ô commit ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö)
**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πâ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡πÉ‡∏ä‡πâ 0.38 ‡∏≠‡∏¢‡∏π‡πà)

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 2: ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** crop_width ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô (center: 1.8x, side: 2.4x)
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡πà‡∏•‡∏≠‡∏á:** ‡πÉ‡∏ä‡πâ normalized_face_h + crop_width ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô
**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πâ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 3: Preset 2 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** multiplier = 6.5 ‡∏ó‡∏≥‡πÉ‡∏´‡πâ crop area ‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:** ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Preset 1 (3.5) + vertical_align = "bottom"
**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πâ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

---

## üí° ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Preset 2:
1. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `CROP_MULTIPLIERS["full_body"]` ‡∏à‡∏≤‡∏Å 6.5 ‚Üí 3.5
2. ‡πÉ‡∏ä‡πâ `vertical_align = "bottom"` (‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)
3. ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏±‡∏ß‚Üí‡πÄ‡∏≠‡∏ß ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Preset 1, ‡πÄ‡∏≠‡∏ß‡∏•‡∏á‡πÑ‡∏õ‡∏´‡∏•‡∏∏‡∏î‡∏à‡∏≠‡πÄ‡∏≠‡∏á

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ normalize ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£:
1. ‡πÉ‡∏ä‡πâ `normalized_face_h` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö crop ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô
2. ‡∏ï‡∏±‡πâ‡∏á `crop_width` ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô (‡πÑ‡∏°‡πà‡πÅ‡∏¢‡∏Å center/side)
3. Resize ‡∏ï‡∏≤‡∏° placement.scale ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡∏´‡∏±‡∏ß‡∏Ç‡∏≤‡∏î:
1. ‡∏•‡∏î `crop_offset` ‡∏à‡∏≤‡∏Å 0.38 ‚Üí 0.20-0.25
2. ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏û‡∏¥‡πà‡∏° `top_margin` ‡∏à‡∏≤‡∏Å 85 ‚Üí 50-60px

---

## üìû API Endpoints

### Health Check:
```
GET /health
```

### Process Async (n8n):
```
POST /process-async
Body: {
  "video_url": "https://drive.google.com/...",
  "webhook_url": "https://...",
  "preset_id": "1" ‡∏´‡∏£‡∏∑‡∏≠ "2"
}
```

### Task Status:
```
GET /tasks/{task_id}
```

---

**üîí ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á - ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏ö!**
